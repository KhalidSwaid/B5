const test = [
    {
        id: "bitcoin",
        symbol: "btc",
        name: "Bitcoin",
        image: "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1696501400",
        current_price: 60397,
        market_cap: 1187123438872,
        market_cap_rank: 1,
        fully_diluted_valuation: 1269310185396,
        total_volume: 69826375959,
        high_24h: 63637,
        low_24h: 56650,
        price_change_24h: 3306.62,
        price_change_percentage_24h: 5.79195,
        market_cap_change_24h: 64575607450,
        market_cap_change_percentage_24h: 5.75259,
        circulating_supply: 19640268.0,
        total_supply: 21000000.0,
        max_supply: 21000000.0,
        ath: 69045,
        ath_change_percentage: -11.7534,
        ath_date: "2021-11-10T14:24:11.849Z",
        atl: 67.81,
        atl_change_percentage: 89754.82801,
        atl_date: "2013-07-06T00:00:00.000Z",
        roi: null,
        last_updated: "2024-02-28T20:19:26.055Z",
        sparkline_in_7d: {
            price: [
                51016.44742116322, 50880.6254216154, 51025.559109410344,
                50937.781498744946, 51390.03137250098, 51516.12152037645,
                51842.75676625642, 51520.3852972089, 51228.95497911139,
                51405.53552886497, 51578.02241404908, 51467.555604471025,
                51505.826048071925, 51755.18247893277, 51806.98126027872,
                51915.08839816274, 51925.89817933047, 51645.83916094753,
                51613.43253578913, 51516.75932498234, 51149.05588447203,
                51393.84969370881, 51576.70292130172, 51454.59679240083,
                51711.14580544951, 51651.87986630683, 51484.038829987636,
                51965.0332258993, 51578.57739458951, 51462.3712941115,
                51319.500125702674, 51445.07757429647, 51290.46384473216,
                51095.29306783685, 51067.967072300395, 51201.271638117025,
                51124.97620014934, 51289.85201499646, 50880.92367526176,
                50908.81488660626, 50949.359440781955, 51166.195179806724,
                51210.2940639519, 50983.584307534344, 51051.37119011336,
                51102.27794973614, 50910.394626552355, 51023.57720713857,
                51135.962066839966, 51131.27428819613, 51080.37683198738,
                51091.530003433276, 50985.782654840594, 50773.475118871436,
                50841.081094770896, 50863.48685286495, 50607.52920064971,
                50788.125508990335, 50848.88547504514, 50950.327041790515,
                51054.130061598386, 50962.224264356795, 51050.048117445396,
                50982.60912739779, 51065.08904770135, 51068.9235454728,
                51127.62804168001, 51073.36046728882, 51131.48175102287,
                51094.447775398425, 51112.86772237167, 51208.34658039908,
                51697.48554467913, 51484.681536061114, 51599.12248105399,
                51513.39102333645, 51558.64778532889, 51573.73667905135,
                51553.096712831146, 51485.262018375855, 51614.216980192345,
                51545.32115884375, 51621.629465192906, 51627.64128004587,
                51699.201967815585, 51735.61018071985, 51726.82888554329,
                51619.54399665533, 51631.8944123664, 51576.56470709675,
                51654.025665677225, 51682.02969592259, 51631.39988867448,
                51731.35612456198, 51509.00951660319, 51405.50649460264,
                51556.434366413734, 51538.633942542714, 51680.84842899583,
                51730.0957098725, 51774.377396554664, 51701.55732383541,
                51725.35393162457, 51674.530312562376, 51458.999296344286,
                51449.58877439659, 51556.22697206768, 51549.89709261979,
                51572.065623970644, 51498.098290461494, 51300.41485157674,
                51278.663078190846, 50926.780715974346, 51180.839719248645,
                51104.85484650301, 51177.737528338555, 51231.644578738815,
                51690.697700635785, 52847.175807956504, 53394.43288905663,
                53443.62062782177, 53633.072547559466, 54455.91125142581,
                54685.05166599562, 54628.95571513321, 54675.40695784579,
                54478.191083122954, 54580.139740714294, 55672.854203004914,
                56318.200914074, 55580.07369933234, 55801.08659956298,
                56116.347347991315, 56386.72475545337, 56104.12682333932,
                56275.61320474057, 56643.12554071901, 56581.53705935442,
                56541.39108692869, 56996.51844918365, 57106.04893315183,
                56900.31296833004, 56765.128743317684, 57051.62669658581,
                56841.94128068301, 57128.702536398945, 57442.86321085786,
                56737.94085264713, 56650.03245400538, 56918.454940304226,
                57003.52673730811, 56994.916552693576, 56857.608882839384,
                56951.85869803529, 56958.15831123478, 57227.46105933989,
                57116.64046654168, 57135.482349711136, 58123.24153531823,
                59508.88968993828, 59325.37345452618, 59266.18106118569,
                58983.94738732378, 59397.89259241082, 60465.38088698786,
                61142.98509518815, 60925.10725370209, 62496.70796054818,
            ],
        },
        price_change_percentage_1h_in_currency: -1.2645498373010833,
        price_change_percentage_24h_in_currency: 5.791947497693195,
        price_change_percentage_7d_in_currency: 18.365286628911132,
    },
    {
        id: "ethereum",
        symbol: "eth",
        name: "Ethereum",
        image: "https://assets.coingecko.com/coins/images/279/large/ethereum.png?1696501628",
        current_price: 3266.32,
        market_cap: 392787750389,
        market_cap_rank: 2,
        fully_diluted_valuation: 392787750389,
        total_volume: 35850388693,
        high_24h: 3492.12,
        low_24h: 3234.17,
        price_change_24h: 22.26,
        price_change_percentage_24h: 0.6861,
        market_cap_change_24h: 2443581560,
        market_cap_change_percentage_24h: 0.62601,
        circulating_supply: 120150997.072339,
        total_supply: 120150997.072339,
        max_supply: null,
        ath: 4878.26,
        ath_change_percentage: -32.39274,
        ath_date: "2021-11-10T14:24:19.604Z",
        atl: 0.432979,
        atl_change_percentage: 761613.4159,
        atl_date: "2015-10-20T00:00:00.000Z",
        roi: {
            times: 71.2533841796582,
            currency: "btc",
            percentage: 7125.33841796582,
        },
        last_updated: "2024-02-28T20:19:33.066Z",
        sparkline_in_7d: {
            price: [
                2905.0463569664676, 2898.3054591875443, 2911.9088992459597,
                2901.6280520837927, 2926.107247125367, 2935.344687097812,
                2977.0820166829903, 2941.6354798495595, 2912.516401792235,
                2920.2454988010754, 2934.945985525585, 2924.614541926896,
                2931.9096685302093, 2959.2931266228234, 2986.707678189698,
                3019.03649111129, 3024.8810723617016, 2996.030315106243,
                2990.2587034929725, 2980.09776459287, 2945.308844653226,
                2969.079097711013, 2985.249196818666, 2967.243031255627,
                2987.2567711223833, 2993.5874791812953, 2986.617109001116,
                3009.2904450595342, 2981.0263786762644, 2985.7836123814745,
                2974.1315861319913, 2989.3907042081114, 2977.5506351080885,
                2951.6346643623815, 2952.9224944741304, 2951.039486418079,
                2953.2593315722484, 2963.883832304354, 2926.2390046821693,
                2919.6492429594227, 2936.0364711269167, 2942.0105058292456,
                2943.2413930023363, 2931.5116034043463, 2940.371307562495,
                2949.1565878913107, 2918.58707234317, 2933.06377166996,
                2945.3958474577794, 2944.7218247861065, 2944.6636034856256,
                2951.946267705884, 2944.053374101856, 2922.9160361048557,
                2926.2859129063513, 2933.351434230059, 2907.502585499638,
                2919.916902409757, 2932.2604740309876, 2947.407621610537,
                2949.992964611262, 2946.3742803280447, 2960.575739343611,
                2949.3454175792244, 2958.9438752433816, 2957.941021825779,
                2963.2169461303247, 2957.560358526013, 2964.1935826747867,
                2956.3405908449495, 2956.0478960515247, 2963.817875806456,
                2999.9447763862277, 2985.395218459312, 2989.518819349732,
                2987.2102632058954, 2987.1875710828117, 2987.7820492512283,
                2988.317384063568, 2989.0746477039074, 3008.681123048421,
                3027.605009462698, 3026.59034243644, 3019.9768664221906,
                3030.339888987385, 3037.011148682033, 3029.911699882223,
                3022.373742907652, 3019.5083384362633, 3024.0907546137023,
                3038.179170046782, 3042.4043294840058, 3041.8569269281375,
                3066.1829330307874, 3045.162591385378, 3040.9172998771933,
                3060.2209814886414, 3062.207739435209, 3080.3543739405804,
                3099.5469170959445, 3107.5577825157093, 3097.5679876292597,
                3111.6352776845724, 3117.711060032415, 3103.0137185731164,
                3098.4384981952294, 3102.9216993088903, 3105.0903568443227,
                3107.186923524151, 3107.0900114947863, 3087.42143153937,
                3093.264915523327, 3042.360427086367, 3060.4817987326705,
                3056.8166542512067, 3062.2443760186916, 3059.3391279053494,
                3103.7450467857516, 3131.9135063045273, 3154.110287573756,
                3153.6776610718166, 3146.1762110454406, 3179.7757799798824,
                3193.848102466788, 3187.1278041982446, 3189.21553334359,
                3173.62994683714, 3171.2892649955224, 3228.110235622291,
                3250.177648061775, 3204.516411936048, 3215.073252568955,
                3220.9208201206316, 3235.8922601867876, 3219.557156038663,
                3221.858035347145, 3253.9833764331956, 3261.656238394269,
                3256.3541792842443, 3267.1770916016703, 3274.2494839397727,
                3260.889513460632, 3232.495691291153, 3235.86125362494,
                3217.957707444016, 3238.2147999682275, 3250.460962142206,
                3241.245280948198, 3244.467005812518, 3252.5289915348,
                3243.7315393053245, 3250.22050603074, 3238.358778382691,
                3245.8088424556254, 3248.5453403652564, 3268.8874991737866,
                3254.5044147608814, 3257.285202720691, 3303.4884892351415,
                3342.1712570172053, 3357.7513274452517, 3348.4847389561833,
                3296.3905343389806, 3314.7681331509834, 3355.2531634482016,
                3373.8532428432654, 3348.1538465616018, 3445.7151905757187,
            ],
        },
        price_change_percentage_1h_in_currency: -1.5121153797468008,
        price_change_percentage_24h_in_currency: 0.6860958427097558,
        price_change_percentage_7d_in_currency: 12.171172870047283,
    },
    {
        id: "tether",
        symbol: "usdt",
        name: "Tether",
        image: "https://assets.coingecko.com/coins/images/325/large/Tether.png?1696501661",
        current_price: 0.998052,
        market_cap: 97801296023,
        market_cap_rank: 3,
        fully_diluted_valuation: 97801296023,
        total_volume: 101100419985,
        high_24h: 1.008,
        low_24h: 0.986684,
        price_change_24h: -0.001503176215728042,
        price_change_percentage_24h: -0.15038,
        market_cap_change_24h: -111501026.17721558,
        market_cap_change_percentage_24h: -0.11388,
        circulating_supply: 98390937373.9967,
        total_supply: 98390937373.9967,
        max_supply: null,
        ath: 1.32,
        ath_change_percentage: -24.4391,
        ath_date: "2018-07-24T00:00:00.000Z",
        atl: 0.572521,
        atl_change_percentage: 74.62114,
        atl_date: "2015-03-02T00:00:00.000Z",
        roi: null,
        last_updated: "2024-02-28T20:15:23.232Z",
        sparkline_in_7d: {
            price: [
                1.0010614908204154, 0.9998306634053084, 1.00043860328228,
                0.9984750375067827, 1.0004957065943236, 1.001492341311849,
                1.0011042014887066, 1.000407899314506, 0.9999387313992458,
                0.9996131650162299, 1.0004461505041815, 1.0002187155758613,
                0.9994389763336399, 0.9996713383247587, 0.9990249990665108,
                1.0003712702563834, 1.0000335191127827, 0.9993874654973808,
                0.9996170148764598, 0.9999004213456792, 1.000684553124567,
                0.9994447011409162, 0.9993394932934182, 0.9991907644763102,
                1.0002014366745406, 1.0010525680202174, 0.9990117589514754,
                1.0012026211472622, 0.9999124004996779, 1.0001076091227512,
                0.9997263111779143, 1.0001221026702884, 0.9987692880036024,
                0.9972532319745182, 0.9998292276416035, 0.9994412162582641,
                0.9989636738984536, 0.9998317238566063, 0.9982275504712405,
                0.9995456593116046, 0.9991267712457681, 1.000067086157037,
                0.9998002883767535, 0.9995755011041828, 1.0000170238993127,
                1.0008389326577687, 0.9988842184625782, 1.0006352286527767,
                0.9995534183305758, 1.0003041217711048, 0.9999070374864666,
                1.0004589942450628, 0.9994374830404081, 0.9996965875720604,
                0.9997398041822495, 0.9996361841057195, 0.9995072034895863,
                1.0004400723195623, 0.9999241692365708, 0.9999204298156832,
                1.0000922721755654, 0.9997678562196612, 0.9995275501583047,
                0.9995814770211146, 0.9996899856096219, 0.9996186360213557,
                1.0002400708718568, 0.9998577618175719, 0.9998445104981856,
                0.9998387293346369, 0.9999925155395202, 1.0003878372385848,
                0.9994898596912986, 0.9990657706919838, 1.0000791163036578,
                0.9998630306626197, 1.0002125692935235, 0.9995037924926874,
                0.9994367735443331, 1.0002556705950683, 1.0012183012383662,
                0.9976329005834229, 1.0005636208776094, 1.0004880846678539,
                1.000530178360467, 0.9996072242428977, 1.0004579434627103,
                0.9998893187327625, 0.9998511959103928, 0.9999555200217911,
                0.9999147190845443, 1.0003771152766605, 0.9996387157820061,
                0.9998257449273114, 0.999564816814356, 0.9999783091912422,
                0.9999199879409922, 1.0001689013149724, 0.9999093175821976,
                0.9993254371823059, 1.0000724645422296, 0.9983318435969525,
                0.9999903409311447, 1.0000792760546198, 0.999101988129823,
                0.9994666689255093, 0.9999161298330442, 1.0002423068846042,
                0.9998774917593577, 0.9998084117886831, 0.9995365426378674,
                0.9996769204095178, 0.9993617958533478, 0.9995239049347667,
                0.9999236126123723, 0.9998473051115637, 0.999718349774633,
                1.0007178172216684, 1.0020412500338867, 0.9998426854736748,
                1.0000836936768789, 1.0016946022978261, 1.0003334678761888,
                1.0020607519957407, 1.0006352109969896, 1.0028044525673885,
                1.000174328314916, 1.001060300868693, 1.0034810127248959,
                1.0013499040657334, 0.9932533976216116, 0.9984048645911922,
                1.0004053522950798, 1.0004910944537857, 0.9996714825113854,
                0.9993240790242739, 1.000584698003497, 1.0010054612838841,
                1.0008061187516728, 1.0005815760633783, 1.0005851108100272,
                1.000957059249897, 0.998525786716875, 0.9999332290779303,
                0.9994611242433284, 1.0000797545409732, 0.9986727044953162,
                0.9999718873862781, 0.9994221299796708, 0.9998250654349837,
                1.0004654800932216, 0.999558988726527, 1.0005363522253563,
                1.0004386076479759, 1.0002110745866821, 1.0000733839818639,
                0.9998009889327246, 1.0004552265715085, 0.9999717770850602,
                1.0017192317383634, 1.0004107170061363, 1.0006350014007133,
                1.0000885506847765, 1.0002903251121977, 1.0007050485715976,
                1.0033117692106401, 1.000874882645771, 1.0076496337896628,
            ],
        },
        price_change_percentage_1h_in_currency: -0.16492179544785532,
        price_change_percentage_24h_in_currency: -0.15038454850393518,
        price_change_percentage_7d_in_currency: -0.23857717053578764,
    },
    {
        id: "binancecoin",
        symbol: "bnb",
        name: "BNB",
        image: "https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1696501970",
        current_price: 405.49,
        market_cap: 62382621639,
        market_cap_rank: 4,
        fully_diluted_valuation: 62382621639,
        total_volume: 1963731318,
        high_24h: 427.62,
        low_24h: 394.02,
        price_change_24h: 11.24,
        price_change_percentage_24h: 2.85022,
        market_cap_change_24h: 1677352580,
        market_cap_change_percentage_24h: 2.76311,
        circulating_supply: 153856150.0,
        total_supply: 153856150.0,
        max_supply: 200000000.0,
        ath: 686.31,
        ath_change_percentage: -40.47349,
        ath_date: "2021-05-10T07:24:17.097Z",
        atl: 0.0398177,
        atl_change_percentage: 1025912.12827,
        atl_date: "2017-10-19T00:00:00.000Z",
        roi: null,
        last_updated: "2024-02-28T20:19:33.205Z",
        sparkline_in_7d: {
            price: [
                368.99688906734116, 367.00086219788716, 370.94286960512227,
                371.8577794497044, 373.8873166644802, 375.24139834575226,
                378.9295030528572, 382.94702390253616, 378.7976581449281,
                376.46272640027854, 375.4178015992989, 375.92286941614833,
                377.8392283751576, 381.0662169418175, 379.16843355694215,
                381.97216312486427, 383.0757430982167, 381.3352947874786,
                382.29874654527606, 381.43982188286896, 377.72013440501786,
                380.9028930577379, 380.7196685813515, 377.96386120576267,
                380.63465970706585, 381.7101704235697, 381.73146524927284,
                385.6330737657257, 382.4429850643104, 384.31821410347743,
                382.1413995274651, 385.47448200628565, 383.68811066532413,
                379.9134769038447, 378.62760703899744, 378.71405440951474,
                380.27028519652896, 382.9030060037855, 376.6621854647279,
                377.7009848483793, 376.41424451171224, 376.9157792781813,
                376.3944590243816, 373.9939739507251, 374.7964967518982,
                376.6593946697703, 372.53165277536726, 374.05887058370706,
                374.8474480652373, 375.2775312791904, 377.10229747064983,
                376.5323127622153, 375.79796449584467, 373.6656333236999,
                375.42971250175134, 376.93283498343567, 372.1642196763926,
                375.2803148242314, 377.4580707446206, 379.0297198180608,
                379.85271127060986, 379.134554858169, 379.3036294622626,
                380.4061722236194, 379.5232745541771, 381.6255675206736,
                380.7861906697991, 379.6299130635514, 380.1739859979376,
                379.97403072336897, 379.28130559345686, 380.14680384456375,
                382.85442737334535, 382.18974257984985, 382.20318104025455,
                382.2181792161593, 382.1499572043983, 381.5291954834371,
                381.9276527408514, 380.8558628260381, 380.7205402666654,
                380.1636771200267, 379.552879208722, 378.9931632399314,
                379.51323664923416, 380.51871901925955, 380.74845656758737,
                380.1653822100344, 379.35131389168794, 379.7536118861619,
                385.2709151562526, 385.1066998811205, 384.1420990630515,
                384.7190506049392, 384.6109336515483, 384.25681601919985,
                385.84872659938463, 386.4108711687204, 388.3850818019938,
                388.35710627825875, 389.023375055824, 389.0677689025526,
                388.4407050922249, 389.0764851707804, 385.1347938537351,
                383.76166674355665, 384.5637504937409, 386.24767886723356,
                385.42055838046537, 386.9361939361448, 386.04912660309844,
                388.684516046575, 384.9152458578605, 387.99424767944515,
                390.4469497605128, 390.2912496815807, 393.41902522923226,
                398.64800678509454, 396.9244028970804, 398.90073484381594,
                398.2008585619502, 396.3121773106467, 398.7469139530845,
                403.8008575399199, 401.81789898013454, 401.72304544668435,
                401.2142854224812, 401.779327796238, 403.3683883676816,
                401.4123236540249, 397.71686320931667, 398.352601929622,
                398.86774731698483, 398.9838111285901, 396.3740471893591,
                397.75604452709865, 398.98314672934936, 399.0149974033356,
                399.26404458675853, 398.31072380846405, 397.81969080650987,
                395.15906186116246, 393.4131354791248, 394.0968704821955,
                391.9113648273737, 395.02727688081103, 395.02823558089534,
                394.84764282148893, 395.15037476329894, 395.75916158914794,
                395.2873518237669, 395.32514393882263, 395.01292969397997,
                396.8404010488517, 396.09069273503377, 397.87166713094047,
                397.81524929581025, 398.1258852299788, 401.556640984983,
                405.7340452921052, 413.8373943773121, 409.65886083220005,
                405.9907818153958, 407.88368419521214, 413.0719504669058,
                416.5546407295172, 413.01962244722785, 423.0751963535796,
            ],
        },
        price_change_percentage_1h_in_currency: -0.9033703483100329,
        price_change_percentage_24h_in_currency: 2.8502178726694067,
        price_change_percentage_7d_in_currency: 9.312745474586533,
    },
    {
        id: "solana",
        symbol: "sol",
        name: "Solana",
        image: "https://assets.coingecko.com/coins/images/4128/large/solana.png?1696504756",
        current_price: 110.54,
        market_cap: 48962074546,
        market_cap_rank: 5,
        fully_diluted_valuation: 63134144042,
        total_volume: 4955216015,
        high_24h: 117.3,
        low_24h: 107.46,
        price_change_24h: 2.71,
        price_change_percentage_24h: 2.51507,
        market_cap_change_24h: 1192091727,
        market_cap_change_percentage_24h: 2.49548,
        circulating_supply: 442600138.146988,
        total_supply: 570710721.187623,
        max_supply: null,
        ath: 259.96,
        ath_change_percentage: -57.07127,
        ath_date: "2021-11-06T21:54:35.825Z",
        atl: 0.500801,
        atl_change_percentage: 22183.73336,
        atl_date: "2020-05-11T19:35:23.449Z",
        roi: null,
        last_updated: "2024-02-28T20:19:26.647Z",
        sparkline_in_7d: {
            price: [
                101.18396678167058, 101.94115181922884, 101.60754690165841,
                104.49375737160706, 104.58077243148752, 105.34263381767492,
                103.83804419056196, 102.29231114063118, 102.60401349693355,
                103.6675532180303, 103.53034699692928, 103.68613746887873,
                105.08506477667409, 104.82894744483222, 105.74610825070155,
                106.82624926102079, 106.02231562365496, 105.78185979174123,
                105.15298057575149, 103.72346679964666, 104.75545896955111,
                105.37345485614591, 103.96422236728958, 104.123837418362,
                104.7535659028326, 103.73566277211432, 104.87886519881766,
                103.49310206403767, 103.19957414106416, 102.0417796526056,
                102.38067172591244, 102.00861168299407, 101.42941558097912,
                101.63356680954254, 102.18299692795436, 102.17042315333708,
                102.94006738778202, 101.82342884209605, 101.57017573710287,
                101.99669489408056, 102.56079772418353, 102.60753319814843,
                101.41915844190247, 101.88760613364691, 102.02896664775217,
                100.54996816222614, 100.37579671571207, 101.39902098763757,
                101.36540977270604, 101.34758730031965, 101.55550797517526,
                101.23551238503163, 99.94530663887535, 99.81847768625543,
                100.47714986383869, 98.63180951071944, 99.59182306065132,
                100.19713282175336, 100.95170169607864, 101.27211192931414,
                101.22387600321176, 102.09289179494183, 101.73290954807784,
                102.5052825865689, 102.20580918635888, 102.33744043692822,
                102.33433005846369, 102.2896639177181, 101.96877582100508,
                101.99727095002936, 102.39497319423609, 103.51781341771093,
                103.57808417565909, 103.82081862656607, 104.0832480724609,
                104.33409080287653, 104.17702459327593, 104.18872590266118,
                103.56531126974512, 103.53264983858546, 103.21494130157956,
                103.20353175277475, 103.19294506309076, 103.19023595792056,
                103.40475893256213, 103.01919250440844, 102.63491788150941,
                102.5999993044773, 102.30249522917507, 102.80524107936489,
                102.97328298801143, 102.69852720176856, 103.430654579246,
                102.68312311879663, 102.51172383536492, 103.33479487433287,
                103.15418969557363, 103.44670380870966, 103.59586336137244,
                103.62582647521576, 103.42015261681716, 103.39971208340403,
                103.8518725925603, 103.45210668276407, 102.82859941931332,
                103.09537574175424, 103.25917241867708, 103.89946716461164,
                104.06804972340925, 103.27297716616829, 103.59818503408499,
                101.51560969153132, 102.04714491815255, 100.88175530240605,
                101.3680275793886, 101.55379554747077, 103.50170101841469,
                104.76296955691801, 106.92800546124533, 109.07731399216226,
                109.61525571690642, 109.51397038163711, 109.33339359805152,
                108.77323538397613, 110.11149221637866, 109.84509740259054,
                110.403403649413, 111.84258550886092, 111.41255428544638,
                110.20986061096369, 109.32898325772123, 110.3517219706289,
                111.23226372207537, 110.73558811735698, 110.94388357447811,
                111.3852307554366, 111.6386315608991, 111.32058409666405,
                111.23772701907498, 110.20731658794665, 109.3063541325959,
                107.25935604733837, 106.73594718579622, 106.79927579428985,
                107.10144901725569, 108.13688643168048, 108.49781618007641,
                108.69798537056599, 108.70024291772249, 108.34903963342038,
                108.82470990913623, 107.98305651398974, 107.97379323534366,
                107.79476261353105, 108.79057241389772, 108.64227434601378,
                108.82306642947707, 110.04350276116148, 110.98176714354892,
                111.75349672137024, 112.43716243574367, 111.64855788593137,
                111.41156547517849, 112.67925724183938, 111.49899896830253,
                112.8042317707463, 116.16043831786094, 111.83885573496654,
            ],
        },
        price_change_percentage_1h_in_currency: -2.121517441728301,
        price_change_percentage_24h_in_currency: 2.5150654922242675,
        price_change_percentage_7d_in_currency: 8.43801144497439,
    },
    {
        id: "staked-ether",
        symbol: "steth",
        name: "Lido Staked Ether",
        image: "https://assets.coingecko.com/coins/images/13442/large/steth_logo.png?1696513206",
        current_price: 3264.81,
        market_cap: 32050561004,
        market_cap_rank: 6,
        fully_diluted_valuation: 32051338588,
        total_volume: 62835878,
        high_24h: 3470.26,
        low_24h: 3228.7,
        price_change_24h: 18.5,
        price_change_percentage_24h: 0.57001,
        market_cap_change_24h: 180597421,
        market_cap_change_percentage_24h: 0.56667,
        circulating_supply: 9804556.35649661,
        total_supply: 9804794.22646307,
        max_supply: null,
        ath: 4829.57,
        ath_change_percentage: -31.72293,
        ath_date: "2021-11-10T14:40:47.256Z",
        atl: 482.9,
        atl_change_percentage: 582.85669,
        atl_date: "2020-12-22T04:08:21.854Z",
        roi: null,
        last_updated: "2024-02-28T20:19:19.677Z",
        sparkline_in_7d: {
            price: [
                2900.582218877539, 2897.3547397830316, 2905.318006133098,
                2901.0242284830697, 2925.537744021197, 2935.133387915026,
                2977.09463032049, 2942.4716628981423, 2913.1024739699174,
                2918.2009052573826, 2932.474373035665, 2924.539667442677,
                2931.6990859757425, 2952.281924228417, 2982.577165511511,
                3015.712215554789, 3023.337693179948, 2995.0219650978156,
                2989.9129160253738, 2978.9039763565806, 2941.371502550515,
                2965.9639114271176, 2983.999221693787, 2965.694199250965,
                2985.7875474102175, 2987.3915920471195, 2983.494732069998,
                3008.7074711973464, 2976.7125380006373, 2980.2630953529833,
                2974.365244095076, 2985.842939772008, 2975.3214266341242,
                2946.255622599846, 2950.157050318668, 2950.496949235037,
                2951.9049023461316, 2962.8637428958027, 2927.563544363272,
                2917.495007390186, 2934.8704191202887, 2941.9066005952036,
                2941.3944582832496, 2929.60666604767, 2939.251139219775,
                2949.3435522630075, 2917.4353311276905, 2932.3889094039832,
                2942.0476814544386, 2939.4668567788863, 2941.991340263209,
                2949.759917616515, 2940.8953174837293, 2921.608688392848,
                2923.9926724008087, 2930.6052045201636, 2905.2855024171495,
                2917.2309695096696, 2928.7021764523547, 2945.9886772183963,
                2946.89819301718, 2943.9929044140836, 2957.913804709388,
                2945.6126583248056, 2954.3323299315616, 2955.842678587202,
                2959.58935322829, 2955.1214899372962, 2962.2418562810067,
                2957.0145553180673, 2957.6118173398736, 2962.721166549872,
                2989.636443719477, 2985.502811207818, 2985.4511214956756,
                2985.33769464939, 2984.7365411224955, 2985.3218821364635,
                2985.215086724264, 2986.937562255017, 3006.784741204273,
                3025.7440067458347, 3025.0224017269265, 3016.740445846525,
                3022.558085686885, 3031.849922781569, 3026.77931847731,
                3014.655085278227, 3015.3867631514972, 3021.4446719309817,
                3033.973514978887, 3039.7838097794333, 3038.9464391355377,
                3065.3580797100803, 3038.241387582513, 3036.557256526109,
                3055.3871118223183, 3055.7096265190035, 3075.6650450433212,
                3097.020000305549, 3102.790305066905, 3094.1630318912635,
                3108.1511861936265, 3112.448185066456, 3098.262818987638,
                3088.3657855034576, 3097.1650797704906, 3099.5604435683795,
                3100.9815249450385, 3106.040628098929, 3084.6851677467544,
                3091.4136062660878, 3038.4382814091496, 3054.4480569397806,
                3051.63892489199, 3061.9779098343556, 3057.539437153712,
                3101.389716897612, 3127.9586069955976, 3150.823165655561,
                3153.858071068102, 3144.804762103848, 3175.796731084216,
                3183.638000351581, 3184.310641848379, 3179.4756520650344,
                3168.200349540846, 3165.0599189916334, 3223.250276135578,
                3250.9938482205525, 3204.590467027507, 3213.9801835099397,
                3218.9388395928095, 3231.2437369768513, 3216.2085599075303,
                3218.0299516667014, 3250.6075997109406, 3256.2166825557424,
                3255.1422586386952, 3271.8956752393156, 3273.290620012127,
                3258.33621767912, 3233.5517062570466, 3231.9271241916404,
                3217.50544413276, 3236.319167404441, 3255.8748551666818,
                3243.5579328217727, 3245.7698446866057, 3250.1233592036388,
                3241.806668516603, 3247.241956262351, 3234.629539471023,
                3242.522863094578, 3247.6052427866643, 3264.7732504726882,
                3252.0884445486336, 3253.0814627905656, 3301.802632293318,
                3335.9826417250265, 3349.4964477964136, 3344.1278159753565,
                3294.9909021632793, 3309.671659651073, 3344.3826626421187,
                3359.005359092921, 3343.8360490480213, 3446.0988830572555,
            ],
        },
        price_change_percentage_1h_in_currency: -1.5628053062485738,
        price_change_percentage_24h_in_currency: 0.570007781343752,
        price_change_percentage_7d_in_currency: 12.373559233162027,
    },
    {
        id: "ripple",
        symbol: "xrp",
        name: "XRP",
        image: "https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1696501442",
        current_price: 0.561853,
        market_cap: 30650574490,
        market_cap_rank: 7,
        fully_diluted_valuation: 56135690604,
        total_volume: 3000788295,
        high_24h: 0.607466,
        low_24h: 0.554092,
        price_change_24h: -0.025252865680716163,
        price_change_percentage_24h: -4.30125,
        market_cap_change_24h: -1503513940.9611092,
        market_cap_change_percentage_24h: -4.67597,
        circulating_supply: 54594247369.0,
        total_supply: 99987873963.0,
        max_supply: 100000000000.0,
        ath: 3.4,
        ath_change_percentage: -83.38061,
        ath_date: "2018-01-07T00:00:00.000Z",
        atl: 0.00268621,
        atl_change_percentage: 20925.98852,
        atl_date: "2014-05-22T00:00:00.000Z",
        roi: null,
        last_updated: "2024-02-28T20:19:29.063Z",
        sparkline_in_7d: {
            price: [
                0.5404280235792905, 0.5386600169959793, 0.5417612652496036,
                0.541057079251457, 0.5462461656977813, 0.5475301081341591,
                0.5494809981825469, 0.5454750900211248, 0.5395414083508913,
                0.5417169228546888, 0.5428293509698413, 0.5408373744051218,
                0.5414002992393373, 0.5437233164606711, 0.5461284904620004,
                0.5467090473848475, 0.5496522602390616, 0.5461687358824578,
                0.5454331576970052, 0.5441938016597451, 0.5388723134155153,
                0.5427770824195566, 0.5438186873455055, 0.5409216760206207,
                0.5428458346016438, 0.5486165382977705, 0.5473506012587765,
                0.550705428846121, 0.5457256592601325, 0.5433708077091265,
                0.5411904079951343, 0.5433849443492845, 0.5399618697093065,
                0.5380798000372128, 0.5377071435509836, 0.5390274368402781,
                0.5392075827706813, 0.5403563700168856, 0.5366635142216185,
                0.5328997193330213, 0.5343901870346321, 0.5358025286580974,
                0.5362692354887633, 0.5347610707576933, 0.5350502539886213,
                0.5366155331496892, 0.5321003671109885, 0.5320309689118282,
                0.535187724244662, 0.5363544738652594, 0.5378531534960217,
                0.540554213312319, 0.5388854429549623, 0.5339008467248072,
                0.5337857590827897, 0.5363379696737766, 0.5322963532652009,
                0.5340692754966794, 0.5365904535375238, 0.5388946644148143,
                0.5397468994306185, 0.5409146506140777, 0.5420539270148225,
                0.5404757999655949, 0.5442193514776625, 0.5453912078253385,
                0.5463006151928317, 0.5443924162121595, 0.5448324606555893,
                0.5434285750158379, 0.5431709866583255, 0.5447235708494763,
                0.5480041542223122, 0.5464993958506597, 0.5458886030003929,
                0.5447709957368628, 0.545198928240329, 0.5454958711418234,
                0.5447789067331453, 0.5439852667667093, 0.5461117193304416,
                0.5444892671639706, 0.5450470675614966, 0.545265055541734,
                0.546441766126106, 0.5461167571580812, 0.5464786468844063,
                0.5460443987455352, 0.5466139732667279, 0.5453730936413108,
                0.5445719074874813, 0.5445666843264173, 0.5438124397816769,
                0.5458520691944053, 0.543161779236387, 0.5427190602431559,
                0.5444151161456908, 0.5437142062655727, 0.5454907374953839,
                0.5443016392137544, 0.5442761677655314, 0.5439826330510499,
                0.542290247379252, 0.5421326599988178, 0.5407224867839714,
                0.5396960599207803, 0.5411307171452397, 0.5394361009233731,
                0.5397454986090767, 0.539255815024613, 0.5368278045130507,
                0.5387973551437132, 0.5327574793560319, 0.5343620016461267,
                0.53216967762624, 0.5322182720513104, 0.5326590329799031,
                0.5370932750120345, 0.5419822385658282, 0.544566180764716,
                0.5491136460381898, 0.5457382150211764, 0.550182137384739,
                0.5504981122709685, 0.5512126334690897, 0.5499793036852024,
                0.5513003044164156, 0.5492479998679067, 0.557137154254674,
                0.5593395767143586, 0.5513845919631557, 0.554370082451653,
                0.5550441080410128, 0.5543707127258957, 0.5524895334492052,
                0.553723778592691, 0.5625217148018706, 0.5594604600811935,
                0.5599337527350315, 0.557480434186015, 0.5634440435331121,
                0.5601739213902296, 0.5638840407228739, 0.5640781051384834,
                0.5721215204705953, 0.5776656371891784, 0.5945656984960073,
                0.580434804794371, 0.582868506649077, 0.5886128671698969,
                0.5867196642839015, 0.5817890638988351, 0.585697473718419,
                0.5837145254796866, 0.5792422396177118, 0.5820078325564765,
                0.5784535812100977, 0.5778621004716847, 0.5836523841000427,
                0.5903683341927092, 0.5875472843780801, 0.5867061282500954,
                0.5821863186346581, 0.5839648105255395, 0.5869246201600355,
                0.5920909668742995, 0.5866676027613356, 0.6052126120986223,
            ],
        },
        price_change_percentage_1h_in_currency: -0.7037964882301312,
        price_change_percentage_24h_in_currency: -4.3012479179549095,
        price_change_percentage_7d_in_currency: 3.7085392542972877,
    },
];

let cryptocurrencies = [];

document.addEventListener("DOMContentLoaded", function () {
    // Add event listener to the checkbox for toggling dark mode
    const checkbox = document.getElementById("checkbox");
    checkbox.addEventListener("change", function (event) {
        if (event.target.checked) {
            document.body.classList.remove("dark");
        } else {
            document.body.classList.add("dark");
        }
        updateIcon();
    });

    // Fetch data and build the table
    cryptocurrencies = test;
    buildTable(cryptocurrencies);
    // fetchDataAndBuildTable(); // Commented out to avoid making too many requests to the API

    const dropdown = document.getElementById("language-dropdown-menu"); //get language dropdown menu

    const dropDownTools = document.getElementById("dropdownHover");

    //Adding event listener to the search
    const searchInput = document.getElementById("search-navbar"); //get the search input element
    if (searchInput) {
        searchInput.addEventListener("input", function (event) {
            const searchTerm = event.target.value;
            let filteredCurrencies = [];
            cryptocurrencies.forEach((currency) => {
                const lowerCaseName = currency.name.toLowerCase();
                const lowerCaseSymbol = currency.symbol.toLowerCase();
                if (
                    lowerCaseName.includes(searchTerm.toLowerCase()) ||
                    lowerCaseSymbol.includes(searchTerm.toLowerCase())
                ) {
                    filteredCurrencies.push(currency);
                }
            });
            buildTable(filteredCurrencies);
        });
    }

    // Add a mouseover event listener to the tools dropdown toggle Tools button
    const toolsButton = document.getElementById("dropdownHoverButton");
    toolsButton.addEventListener("mouseover", function () {
        const rect = toolsButton.getBoundingClientRect();

        dropDownTools.style.position = "absolute";
        dropDownTools.style.left = rect.left + "px";
        dropDownTools.style.top = rect.bottom + "px";

        // dropDownTools.style.width = `${rect.width}px`;

        dropDownTools.classList.remove("hidden");
    });

    toolsButton.addEventListener("mouseot", function () {
        dropDownTools.classList.add("hidden");
    });

    // Add a click event listener to the language dropdown toggle button
    const button = document.getElementById("englishButton"); //get language toggle bar button
    button.addEventListener("click", function () {
        const rect = button.getBoundingClientRect();
        // Calculate the position to open the dropdown below the button
        dropdown.style.left = rect.left + "px";
        dropdown.style.top = rect.bottom + "px";

        // Toggle the visibility of the language dropdown
        dropdown.classList.toggle("hidden");
    });

    // Add a global click event listener to close the dropdown when clicking outside the button and dropdown
    document.addEventListener("click", function (event) {
        if (
            !button.contains(event.target) &&
            !dropdown.contains(event.target)
        ) {
            // Close the dropdown if the click is outside the button and dropdown
            dropdown.classList.add("hidden");
        }
    });

    document.addEventListener("mouseout", function (event) {
        if (
            !toolsButton.contains(event.target) &&
            !dropDownTools.contains(event.target)
        ) {
            dropDownTools.classList.add("hidden");
        }
    });

    // function that build the currency table
    function buildTable(currency) {
        const tableBody = document.getElementById("dataTable");
        tableBody.innerHTML = "";

        Object.values(currency).forEach((crypto, index) => {
            const row = document.createElement("tr");
            row.className = index === currency.size - 1 ? "" : "border-b";

            // Creating and appending the # cell
            let cell = document.createElement("td");
            cell.className = "py-2 px-4";
            cell.style = "text-align: center";
            cell.textContent = index + 1;
            row.appendChild(cell);

            // Creating and appending the Name cell with image
            cell = document.createElement("td");
            const image = document.createElement("img");
            image.src = crypto.image;
            image.alt = `${crypto.name} Logo`;
            image.className = "w-6 h-6 mr-2";
            cell.appendChild(image);
            cell.appendChild(document.createTextNode(crypto.name));
            cell.className =
                "py-2 px-4 flex justify-start h-[100%] items-center";
            row.appendChild(cell);

            // Price
            cell = document.createElement("td");
            cell.className = "py-2 px-4 text-center";
            cell.textContent = "$" + format_number(crypto.current_price);
            row.appendChild(cell);

            // Change 1h
            cell = createChangeElement(
                crypto.price_change_percentage_1h_in_currency,
            );
            cell.classList.add("md:table-cell", "hidden");
            row.appendChild(cell);

            // Change 24h
            cell = createChangeElement(
                crypto.price_change_percentage_24h_in_currency,
            );
            cell.classList.add("md:table-cell", "hidden");
            row.appendChild(cell);

            // Change 7d
            cell = createChangeElement(
                crypto.price_change_percentage_7d_in_currency,
            );
            row.appendChild(cell);

            // Market Cap
            cell = document.createElement("td");
            cell.className = "py-2 px-4 md:table-cell hidden";
            cell.textContent = "$" + format_number(crypto.market_cap);
            row.appendChild(cell);

            // Volume
            cell = createVolumeCell(
                crypto.total_volume,
                crypto.current_price,
                crypto.symbol,
            );
            cell.classList.add("md:table-cell", "hidden");
            row.appendChild(cell);

            // Circulating Supply
            cell = document.createElement("td");
            cell.className = "py-2 px-4 md:table-cell hidden";
            cell.textContent =
                format_number(crypto.circulating_supply) +
                " " +
                crypto.symbol.toUpperCase();
            cell.style = "text-align: center"; // Styling as per your setup
            row.appendChild(cell);

            // Last 7 Days
            cell = document.createElement("td");
            var div = document.createElement("div");
            var canvas = document.createElement("canvas");
            canvas.width = "100";
            canvas.height = "50";

            div.appendChild(canvas);
            cell.appendChild(div);
            cell.className = "py-2 px-4 md:table-cell hidden";
            row.appendChild(cell);
            // Append the row to the table body
            tableBody.appendChild(row);

            var ctx = canvas.getContext("2d");

            const data = Object.values(crypto.sparkline_in_7d.price).map(
                (price) => parseFloat(price),
            );

            console.log(crypto.sparkline_in_7d);

            var sparklineChart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: Array.from({ length: 168 }, (_, i) => i + 1),
                    datasets: [
                        {
                            data: data, // Example data
                            borderColor: "rgba(75, 192, 192, 1)",
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 0,
                            tension: 0.1,
                        },
                    ],
                },
                options: {
                    responsive: false,
                    plugins: {
                        legend: {
                            display: false, // Hides legend
                        },
                        tooltip: {
                            enabled: false,
                        },
                    },
                    scales: {
                        x: {
                            display: false, // Hides X-axis
                            beginAtZero: false,
                        },
                        y: {
                            display: false, // Hides Y-axis
                            beginAtZero: true,
                        },
                    },
                    elements: {
                        line: {
                            borderWidth: 1, // Adjust line thickness
                        },
                        point: {
                            radius: 0,
                        },
                    },
                    hover: {
                        mode: null, // This disables hover effects
                    },
                    maintainAspectRatio: false,
                },
            });

            console.log(data);
        });
    }

    async function fetchDataAndBuildTable() {
        try {
            cryptocurrencies = await getCryptoData();
            buildTable(cryptocurrencies);
        } catch (error) {
            console.error("Failed to fetch or build table:", error);
        }
    }
});

async function getCryptoData() {
    const url = "https://api.coingecko.com/api/v3/coins/markets";
    const parameters = {
        vs_currency: "usd",
        order: "market_cap_desc",
        per_page: 100,
        sparkline: true,
        price_change_percentage: "1h,24h,7d",
    };
    const queryString = new URLSearchParams(parameters).toString();
    const response = await fetch(`${url}?${queryString}`);
    const data = await response.json();

    const currencies = data.map((coin) => coin);

    console.log(currencies);
    return currencies;
}

function createChangeElement(change) {
    const changeNegative = change < 0;

    // Create SVG element
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("class", "w-2.5 h-2.5 ms-3");
    svg.setAttribute("aria-hidden", "true");
    svg.setAttribute("fill", "none");
    svg.setAttribute("viewBox", "0 0 10 6");

    // Create PATH element
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("stroke", "currentColor");
    path.setAttribute("stroke-linecap", "round");
    path.setAttribute("stroke-linejoin", "round");
    path.setAttribute("stroke-width", "2");
    path.setAttribute("d", changeNegative ? "m1 1 4 4 4-4" : "m1 5 4-4 4 4");

    // Append PATH to SVG
    svg.appendChild(path);

    const second_span = document.createElement("span");
    second_span.style = "width: 12px; height: 18px; display: inline-block;";
    if (changeNegative) {
        second_span.className = "text-red-500 mr-3 ml-3 mt-2"; // Add your classes here
    } else {
        second_span.className = "text-green-500 mr-3 ml-3 mt-2"; // Add your classes here
    }

    second_span.appendChild(svg);

    const first_span = document.createElement("span");
    if (changeNegative) {
        first_span.className = "flex items-center text-red-500"; // Add your classes here
    } else {
        first_span.className = "flex items-center text-green-500"; // Add your classes here
    }

    first_span.appendChild(second_span);
    first_span.appendChild(document.createTextNode(format_number(change)));

    const td = document.createElement("td");
    td.className = "py-2 px-4 border-b";

    td.appendChild(first_span);

    return td;
}

function createVolumeCell(volume, price, symbol) {
    const td = document.createElement("td");
    td.className = "py-2 px-4 border-b";
    td.style = "text-align: end";

    const div = document.createElement("div");

    const a = document.createElement("a");
    a.href = "#";
    const p = document.createElement("p");
    p.className = "font-medium";
    p.textContent = "$" + format_number(volume);

    a.appendChild(p);

    const second_div = document.createElement("div");
    const second_p = document.createElement("p");
    second_p.className = "text-slate-400";
    const volumeInCrypto =
        format_number(volume / price) + " " + symbol.toUpperCase();
    second_p.textContent = volumeInCrypto;

    second_div.appendChild(second_p);

    div.appendChild(a);
    div.appendChild(second_div);

    td.appendChild(div);
    return td;
}

function updateIcon() {
    if (checkbox.checked) {
        document.querySelector(".slider").classList.add("dark");
        document.querySelector(".slider").classList.remove("light");
    } else {
        document.querySelector(".slider").classList.add("light");
        document.querySelector(".slider").classList.remove("dark");
    }
}

const darkModeToggle = document.getElementById("darkModeToggle");
const body = document.body;
updateIcon();
darkModeToggle.addEventListener("click", () => {
    // Toggle dark mode class on the body
    body.classList.toggle("dark");

    // Save user preference in localStorage
    const isDarkMode = body.classList.contains("dark");
    localStorage.setItem("darkMode", isDarkMode);

    // Update button text based on mode
    updateButtonText(isDarkMode);
    updateIcon();
});

// Function to update button text based on mode
function updateButtonText(isDarkMode) {
    darkModeToggle.textContent = isDarkMode ? "Light" : "Dark";
}

// Check user preference from localStorage
const isDarkMode = localStorage.getItem("darkMode") === "true";
if (isDarkMode) {
    body.classList.add("dark");
    updateButtonText(true);
} else {
    body.classList.remove("dark");
    updateButtonText(false);
}

function format_number(number) {
    let formattedNumber = number.toFixed(10);
    let numberAsNumber = parseFloat(formattedNumber);
    return numberAsNumber.toLocaleString();
}

const breakpoints = {
    sm: 640,
    md: 768,
    lg: 1024,
    xl: 1280,
    "2xl": 1536,
};

function getScreenSize() {
    const width = window.innerWidth;

    if (width < breakpoints.sm) {
        return "xs"; // Extra small (custom label, as Tailwind doesn't define below 'sm')
    } else if (width < breakpoints.md) {
        return "sm";
    } else if (width < breakpoints.lg) {
        return "lg";
    } else if (width < breakpoints.xl) {
        return "xl";
    } else if (width < breakpoints["2xl"]) {
        return "2xl";
    } else {
        return "3xl"; // Beyond the defined Tailwind breakpoints
    }
}

// Example usage
console.log("Current Tailwind screen size:", getScreenSize());

// Listening for resize events
window.addEventListener("resize", () => {
    console.log("Updated Tailwind screen size:", getScreenSize());
});
